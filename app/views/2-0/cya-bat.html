{% extends "layout.html" %}

{% block pageTitle %} 
[TO DO]
{% endblock %}

{% block beforeContent %}
    {% include "includes/alpha-banner.html" %}
    {% include "includes/back-link.html" %}
{% endblock %}

{% set _roosts = myData.selectedApplication.roosts %}
{% set _roostsCount = _roosts.length %}

{% block content %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
		<form method="POST">

            <h1 class="govuk-heading-xl">
				[Check your answers]
			</h1>
    
            <h2 class="govuk-heading-l">{{_roostsCount}} roost{% if _roostsCount != 1 %}s{% endif %}</h2>
    
            {% for _roost in _roosts %}
            <h2 class="govuk-heading-m">[Roost {{loop.index}}]</h2>
            <!-- {{_roost|dump|safe}} -->
            <dl class="govuk-summary-list govuk-!-margin-bottom-9">

                <!-- Bat species -->
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        [Bat species]
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% for _bat in _roost.bats %}
                            {{_bat.name}}{% if loop.last != true %}<br>{% endif %}
                        {% endfor %}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a class="govuk-link govuk-link--no-visited-state" href="species-bat?roost={{_roost.id}}">
                            Change<span class="govuk-visually-hidden"> bat species</span>
                        </a>
                    </dd>
                </div>

                <!-- Bat numbers -->
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        [Numbers]
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% for _bat in _roost.bats %}
                            {{_bat.name}}:<br>
                            {{_bat.numberUsing}} using<br>
                            {{_bat.numberIn}} during works{% if loop.last != true %}<br><br>{% endif %}
                        {% endfor %}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a class="govuk-link govuk-link--no-visited-state" href="numbers-bat?roost={{_roost.id}}">
                            Change<span class="govuk-visually-hidden"> numbers</span>
                        </a>
                    </dd>
                </div>

                <!-- Roost use -->
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        [Roost use]
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% for _bat in _roost.bats %}
                            {{_bat.name}}:<br>

                            {% for _batRoostUse in _bat.roostUses %}
                            {{_batRoostUse.name}}{% if loop.last != true %},{% endif %}
                            {% endfor %}
                            
                            {% if loop.last != true %}<br><br>{% endif %}
                        {% endfor %}

                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a class="govuk-link govuk-link--no-visited-state" href="using-roost?roost={{_roost.id}}">
                            Change<span class="govuk-visually-hidden"> roost uses</span>
                        </a>
                    </dd>
                </div>

                <!-- Roost activities -->
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        [Affecting roost]
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {{_roost.activity.name}}<br>
                        {% for _roostActivityMethod in _roost.activity.methods %}
                            {{_roostActivityMethod.name}}{% if loop.last != true %},{% endif %}
                        {% endfor %}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a class="govuk-link govuk-link--no-visited-state" href="activities-roost?roost={{_roost.id}}">
                            Change<span class="govuk-visually-hidden"> roost activity</span>
                        </a>
                    </dd>
                </div>

                <!-- Bat activities -->
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        [Affecting bats]
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {% for _bat in _roost.bats %}
                            {{_bat.name}}:<br>

                            {% for _batActivity in _bat.activities %}
                            {{_batActivity.name}}{% if loop.last != true %},{% endif %}
                            {% endfor %}
                            
                            {% if loop.last != true %}<br><br>{% endif %}
                        {% endfor %}

                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a class="govuk-link govuk-link--no-visited-state" href="activities-bat?roost={{_roost.id}}">
                            Change<span class="govuk-visually-hidden"> bat activities</span>
                        </a>
                    </dd>
                </div>
            
            </dl>
            {% endfor %}
    
            <h2 class="govuk-heading-m">[Now save your answers]</h2>  
                      
            {{govukButton({
                text: "Continue"
            })}}

        </form>

	</div>
</div>

{% endblock %}